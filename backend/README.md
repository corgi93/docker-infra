## backend (nestjs)

### 기술스택
- node (v18.17.1)
- nestjs 
- prisma (orm) 
- MySQL
- docker


### ERD 
- 식별관계
    - 부모테이블의 기본키를 내려받아 자식테이블의 `(기본키 + 외래키)`를 사용하는 관계
    - 식별관계로 하면 부모테이블의 기본키가 자식테이블로 전파되며 자식테이블의 기본키 컬럼이 점점 늘어남.. 자식은 2개, 손자는 3개 ...
    = 식별관계는 2개 이상의 컬럼을 합해 복합 기본키로 사용하는 경우가 많고, 테이블 구조가 유연하지 못하다
- 비식별관계
    - 부모테이블의 기본키를 받아서 자식테이블의 `외래키`로만 사용하는 관계
        - 필수적 비식별 관계 : 외래키의 NULL 허용하지 않음
        - 선택적 비식별 관계 : 외래키에 NULL을 허용

* __결론은__ 필수적 비식별 관계 추천하고 
    - 선택적 비식별 관계는 NULL 허용하므로 조인할 경우 `외부 조인`으로 사용!
    - 필수적 비식별 관계는 NOT NULL로 항상 관계가 있다는 것을 보장하므로 `내부 조인`을 사용! 


## DB 마이그레이션
prisma 스키마가 정의되면 마이그레이션 실행해서 실제 테이블 생성.
첫번째 마이그레이션 생성하고 실행하려면 아래 명령어 터미널 실행
```
npx prisma migrate dev --name 'init'
```
1. `prisma/migrations` 폴더가 생성되 스키마의 스냅샷을 찍고 migration을 수행하는 데 피룡한 sql명령을 파악
2. migration파일의 sql을 실행해 db의 기본 테이블 생성
3. prisma client 생성. `@prisma/client` 가 dependencies에 추가되어야 함

